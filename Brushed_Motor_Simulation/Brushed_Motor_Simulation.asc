Version 4
SHEET 1 1944 692
WIRE 432 -656 432 -688
WIRE 576 -656 576 -688
WIRE 1168 -624 1168 -656
WIRE 240 -576 240 -640
WIRE 288 -576 240 -576
WIRE 240 -544 240 -576
WIRE 288 -544 288 -576
WIRE 320 -544 288 -544
WIRE 432 -544 432 -576
WIRE 432 -544 400 -544
WIRE 464 -544 432 -544
WIRE 576 -544 576 -576
WIRE 576 -544 544 -544
WIRE 656 -528 656 -560
WIRE 576 -512 576 -544
WIRE 624 -512 576 -512
WIRE 1088 -512 1088 -544
WIRE -576 -496 -576 -544
WIRE -432 -496 -432 -544
WIRE -288 -496 -288 -544
WIRE -144 -496 -144 -544
WIRE 752 -496 688 -496
WIRE 1056 -496 752 -496
WIRE 624 -480 576 -480
WIRE 1168 -480 1168 -544
WIRE 1168 -480 1120 -480
WIRE 1248 -480 1168 -480
WIRE 1056 -464 1024 -464
WIRE 320 -448 288 -448
WIRE 432 -448 400 -448
WIRE 464 -448 432 -448
WIRE 576 -448 576 -480
WIRE 576 -448 544 -448
WIRE 656 -432 656 -464
WIRE 240 -416 240 -464
WIRE 288 -416 288 -448
WIRE 288 -416 240 -416
WIRE 432 -416 432 -448
WIRE 1088 -416 1088 -448
WIRE 848 -384 848 -416
WIRE -576 -368 -576 -416
WIRE -432 -368 -432 -416
WIRE -288 -368 -288 -416
WIRE -144 -368 -144 -416
WIRE 1024 -368 1024 -464
WIRE 1056 -368 1024 -368
WIRE 1168 -368 1168 -480
WIRE 1168 -368 1136 -368
WIRE 576 -336 576 -448
WIRE 624 -336 576 -336
WIRE 752 -336 752 -496
WIRE 752 -336 704 -336
WIRE 432 -304 432 -336
WIRE 848 -288 848 -304
WIRE 896 -288 848 -288
WIRE 1024 -288 1024 -368
WIRE 1024 -288 976 -288
WIRE 848 -272 848 -288
WIRE 112 -256 -16 -256
WIRE 240 -256 240 -416
WIRE 240 -256 112 -256
WIRE 352 -256 240 -256
WIRE 528 -256 352 -256
WIRE -16 -192 -16 -256
WIRE 528 -192 528 -256
WIRE 848 -160 848 -192
WIRE 112 -112 112 -256
WIRE 160 -112 112 -112
WIRE 352 -112 352 -256
WIRE 400 -112 352 -112
WIRE 112 -64 112 -112
WIRE 400 -64 400 -112
WIRE -16 -48 -16 -112
WIRE 64 -48 -16 -48
WIRE 160 -48 160 -112
WIRE 352 -48 352 -112
WIRE 528 -48 528 -112
WIRE 528 -48 448 -48
WIRE -464 80 -560 80
WIRE -352 80 -384 80
WIRE -16 80 -16 -48
WIRE -16 80 -160 80
WIRE 112 80 112 32
WIRE 160 80 160 16
WIRE 160 80 112 80
WIRE 352 80 352 16
WIRE 400 80 400 32
WIRE 400 80 352 80
WIRE 528 80 528 -48
WIRE 672 80 528 80
WIRE 896 80 864 80
WIRE 1072 80 976 80
WIRE 112 128 112 80
WIRE 224 128 112 128
WIRE 400 128 400 80
WIRE 400 128 304 128
WIRE -352 176 -560 176
WIRE -96 176 -160 176
WIRE 112 176 112 128
WIRE 160 176 112 176
WIRE 400 176 400 128
WIRE 400 176 352 176
WIRE 672 176 608 176
WIRE 1072 176 864 176
WIRE 112 208 112 176
WIRE 400 208 400 176
WIRE 160 240 160 176
WIRE 352 240 352 176
WIRE -96 256 -96 176
WIRE 608 256 608 176
WIRE -16 288 -16 80
WIRE 64 288 -16 288
WIRE 528 288 528 80
WIRE 528 288 448 288
WIRE 112 352 112 304
WIRE 160 352 160 304
WIRE 160 352 112 352
WIRE 352 352 352 304
WIRE 400 352 400 304
WIRE 400 352 352 352
WIRE 112 416 112 352
WIRE 256 416 112 416
WIRE 400 416 400 352
WIRE 400 416 256 416
WIRE 256 464 256 416
FLAG 256 464 0
FLAG 240 -640 VMOT
FLAG -576 -368 0
FLAG -432 -368 0
FLAG -288 -368 0
FLAG -576 -544 VMOT
FLAG -432 -544 DIR_LEFT
FLAG -288 -544 DIR_RIGHT
FLAG 608 256 0
FLAG -96 256 0
FLAG -144 -368 0
FLAG -144 -544 VCC
FLAG -560 80 OVERCURRENT
FLAG 432 -304 0
FLAG 432 -688 0
FLAG 656 -432 VCC
FLAG 576 -688 0
FLAG 656 -560 0
FLAG 1088 -416 0
FLAG 1088 -544 VCC
FLAG 848 -416 VCC
FLAG 848 -160 0
FLAG 1248 -480 OVERCURRENT
FLAG 1072 176 DIR_LEFT
FLAG -560 176 DIR_RIGHT
FLAG 1168 -656 VCC
FLAG 1072 80 VCC
SYMBOL nmos 64 208 R0
WINDOW 0 6 -10 Left 2
WINDOW 3 -58 107 Left 2
SYMATTR InstName M1
SYMATTR Value BSS145
SYMBOL nmos 448 208 M0
WINDOW 0 5 -8 Left 2
WINDOW 3 -54 109 Left 2
SYMATTR InstName M2
SYMATTR Value BSS145
SYMBOL diode 176 16 R180
WINDOW 0 -33 44 Left 2
WINDOW 3 -71 3 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode 368 16 R180
WINDOW 0 36 45 Left 2
WINDOW 3 23 0 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode 176 304 R180
WINDOW 0 -33 43 Left 2
WINDOW 3 -67 1 Left 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode 368 304 R180
WINDOW 0 34 44 Left 2
WINDOW 3 21 0 Left 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL res 320 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 5
SYMBOL voltage -576 -512 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 12V
SYMBOL voltage -432 -512 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 0V
SYMBOL voltage -288 -512 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 5V
SYMBOL res 224 -560 R0
SYMATTR InstName R2
SYMATTR Value 0R1
SYMBOL res 512 -208 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res -32 -208 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL pmos 64 32 M180
WINDOW 0 11 -8 Left 2
WINDOW 3 -72 105 Left 2
SYMATTR InstName M5
SYMATTR Value Si9400DY
SYMBOL pmos 448 32 R180
WINDOW 0 2 -7 Left 2
WINDOW 3 -71 107 Left 2
SYMATTR InstName M6
SYMATTR Value Si9400DY
SYMBOL Optos\\PC817A 768 128 M0
SYMATTR InstName U1
SYMBOL Optos\\PC817A -256 128 R0
SYMATTR InstName U2
SYMBOL res -368 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 220
SYMBOL res 992 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 -57 59 VTop 2
SYMATTR InstName R9
SYMATTR Value 220
SYMBOL voltage -144 -512 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 5V
SYMBOL res 560 -560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 -54 57 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 560 -464 R90
WINDOW 0 63 62 VBottom 2
WINDOW 3 66 62 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 416 -464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 -53 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 416 -432 R0
WINDOW 0 -50 47 Left 2
WINDOW 3 -36 76 Left 2
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL res 416 -560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 -55 57 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL res 416 -672 R0
WINDOW 0 -36 27 Left 2
WINDOW 3 -22 2 Left 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res 720 -352 R90
WINDOW 0 65 57 VBottom 2
WINDOW 3 67 59 VTop 2
SYMATTR InstName R13
SYMATTR Value 220k
SYMBOL res 560 -672 R0
SYMATTR InstName R14
SYMATTR Value 220k
SYMBOL Opamps\\OP07 656 -432 M180
SYMATTR InstName U3
SYMBOL Opamps\\OP07 1088 -544 R0
SYMATTR InstName U4
SYMBOL res 1152 -384 R90
WINDOW 0 63 55 VBottom 2
WINDOW 3 68 55 VTop 2
SYMATTR InstName R15
SYMATTR Value 2k
SYMBOL res 832 -400 R0
SYMATTR InstName R16
SYMATTR Value 1k5
SYMBOL res 832 -288 R0
SYMATTR InstName R17
SYMATTR Value 4k7
SYMBOL res 992 -304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 1k
SYMBOL res 1152 -640 R0
SYMATTR InstName R19
SYMATTR Value 10k
TEXT -472 -328 Left 2 !.tran 0 1us 0.5us 0.1us
TEXT 768 -488 VRight 1 ;Uwy=R13/R3*(Uwe2-Uwe1)\nAssumed that \nR3=R4, R14=R13
TEXT 168 -416 Left 2 ;Uwe1
TEXT 168 -576 Left 2 ;Uwe2
TEXT 1008 -272 Left 2 ;Uref
TEXT 952 -512 Left 2 ;Uwe
TEXT -616 -296 Left 2 !.lib C:\\Program Files\\LTC\\LTspiceIV\\lib\\sub\\74hct.lib
